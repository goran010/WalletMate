{% extends "base.html" %}

{% block content %}
<h2>Transaction Report</h2>

<!-- Chart Canvas -->
<canvas id="transactionChart"></canvas>

<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Parse JSON data from Django
  var chartData = JSON.parse('{{ chart_data|escapejs }}');

  var ctx = document.getElementById("transactionChart").getContext("2d");
  var transactionChart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: chartData.users,  // Usernames
      datasets: [
        {
          label: "Income",
          backgroundColor: "rgba(75, 192, 192, 0.6)",
          data: chartData.income,  // Income values
        },
        {
          label: "Expenses",
          backgroundColor: "rgba(255, 99, 132, 0.6)",
          data: chartData.expenses,  // Expense values
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

{% endblock %}
